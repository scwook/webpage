<!DOCTYPE html>
<html>
<link rel="stylesheet" type="text/css" href="../script/swiper-bundle.min.css">
<script src="../script/swiper-bundle.min.js"></script>

<style>
    :root {
        --background-image-top: 0px;
    }

    @font-face {
        font-family: "Helvetica-Neue-Light";
        src: url(fonts/helveticaneue/HelveticaNeueLight.ttf);
    }

    @font-face {
        font-family: "Roboto-Thin";
        src: url(fonts/Roboto-Thin.ttf);
    }

    @font-face {
        font-family: "Roboto-Light";
        src: url(fonts/Roboto-Light.ttf);
    }

    body {
        margin: 0px;
        background-color: black;
        background-image: url('shadowbg.png');
        background-repeat: no-repeat;
        background-position: center var(--background-image-top);
        font-family: "Roboto-Thin";
    }

    #time-stamp {
        position: absolute;
        color: white;
        font-family: "Roboto-Thin";
        font-size: 48px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -70%);
    }

    #under-line {
        position: absolute;
        top: 40px;
    }

    #center-top {
        position: absolute;
        left: 50%;
        transform: translate(-50%, 0%);
    }

    #raon-box {
        position: absolute;
        left: 10px;
        top: 20px;
    }

    #accelerator-control {
        position: absolute;
        color: white;
        width: 150px;
        left: 150px;
        top: 40px;
        font-family: "Helvetica-Neue-Light";
    }

    #menu {
        display: flex;
        position: absolute;
        width: 700px;
        height: 80px;
        left: 1200px;
        justify-content: space-evenly;
        color: white;
        font-size: 18px;
    }

    #menu a {
        margin: auto;
        text-decoration: none;
        transition: all 0.2s ease-in-out;
    }

    #menu a:visited {
        color: white;
    }

    #menu a:hover {
        transform: scale(1.3);
    }

    .search-box {
        /* position: relative; */
        width: 800px;
        height: 50px;
        margin: auto;
    }

    #input {
        padding: 10px;
        font-size: 28px;
        border: 3px solid #1d1d1d;
        width: 780px;
        height: 28px;
        background: rgba(10, 10, 10, 0.5);
        color: white;
        transition: 0.5s;
        outline: none;
    }

    /* Hide spin arrows */
    /* Chrome, Safari, Edge, Opera */
    #input::-webkit-outer-spin-button,
    #input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Firefox */
    #input[type=number] {
        -moz-appearance: textfield;
    }


    #input:focus {
        border: 3px solid dodgerblue;
    }

    #button {
        float: left;
        width: 10%;
        padding: 10px;
        background: #1d1d1d;
        color: white;
        font-size: 28px;
        border: 1px solid #1d1d1d;
        border-left: none;
        cursor: pointer;
    }

    .swiper-container {
        width: 100%;
        padding-top: 50px;
        padding-bottom: 50px;
        /* background-color: brown; */
    }

    /* .swiper-slide {
        background-position: center;
        background-size: cover;
        width: 600px;
        height: 400px;
        background-color: #fff;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        filter: blur(4px);
        background: #d1ebff;
        border-radius: 10px;

    } */

    .swiper-slide {
        background-position: center;
        background-size: cover;
        width: 600px;
        height: 400px;
        background-color: #fff;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        /* opacity: 0.5; */
        /* filter: blur(4px); */
        /* background: #d1ebff; */
        border-radius: 10px;
    }

    .swiper-slide-active {
        filter: blur(0px);
        background: #fff;
    }

    .testimonialBox {
        position: relative;
        width: 100%;
        padding: 40px;
        padding-top: 90px;
        color: #999;

    }

    .swiper-container-3d .swiper-slide-shadow-left,
    .swiper-container-3d .swiper-slide-shadow-right {
        background-image: none;
    }

    .asset-image {
        position: absolute;
        width: 100%;
        height: 100%;
        background-size: cover;
        /* background-color: rgba(0, 0, 0, 0.0); */
        /* background-color: fuchsia; */
        /* padding: 14px; */
        /* overflow: hidden; */
    }

    .asset-container {
        position: absolute;
        width: 100%;
        height: 100%;
        /* padding: 20px; */
        background-color: rgba(0, 0, 0, 0.6);
        /* background-color: fuchsia; */
    }

    .asset-number {
        position: absolute;
        left: 10px;
        top: 10px;
        color: white;
        font-size: 40px;
        /* border-radius: 0px 0px 10px 10px; */
    }

    .asset-date {
        position: absolute;
        left: 10px;
        top: 60px;
        color: #CCCCCC;
        font-size: 24px;
    }

    .asset-manager {
        position: absolute;
        right: 10px;
        top: 10px;
        color: #FFF;
        font-size: 48px;
        opacity: 0.2;
    }

    .asset-name {
        position: absolute;
        left: 10px;
        bottom: 50px;
        color: #CCCCCC;
        font-size: 24px;
    }

    .asset-location {
        position: absolute;
        left: 10px;
        bottom: 10px;
        color: #CCCCCC;
        font-size: 24px;
    }
</style>

<body>
    <div style="margin:auto; position: relative; width:1920px; height:80px;">
        <div id="time-stamp"></div>
        <svg id="under-line" width="1920" height="42">
            <style>
                .under-line-style {
                    fill: none;
                    stroke: #f3f3f3;
                    stroke-miterlimit: 10;
                    stroke-width: 2px;
                }
            </style>
            <polyline class="under-line-style" points="0 40 760 40 791 0" />
            <polyline class="under-line-style" points="1920 40 1160 40 1129 0" />
        </svg>
        <svg id="center-top" width="400" height="80">
            <path
                d="M12.5,0H0L57,76a10,10,0,0,0,8,4H335a10,10,0,0,0,8-4L400,0H387.5L338,66a10,10,0,0,1-8,4H70a10,10,0,0,1-8-4Z"
                style="fill:#f3f3f3" />
        </svg>
        <div id="raon-box"><a href="main.html"><img src="images/raon-white.svg"></img></a></div>
        <div id="accelerator-control">Accelerator Control</div>
        <div id="menu">
            <a href="monitoring.html">Monitoring</a>
            <a href="schedule.html">Schedule</a>
            <a href="archive.html">Archive</a>
            <a href="downloads.html">Download</a>
            <a href="documents.html">Document</a>
        </div>
    </div>

    <div style="height:50px"></div>

    <div id="body" style="margin:auto; position:relative; width:1920px; height:900px;">
        <div class="search-box">
            <input type="number" id="input" placeholder="Asset Number">
            <svg onclick="searchData()" style="position: absolute; left:1325px; top: 13px">
                <defs>
                    <style>
                        .cls-1 {
                            fill: none;
                            stroke: #6d6d6d;
                            stroke-miterlimit: 10;
                            stroke-width: 3px;
                        }
                    </style>
                </defs>
                <circle class="cls-1" cx="10.5" cy="10.5" r="9" />
                <line class="cls-1" x1="17.04" y1="17.04" x2="25.04" y2="25.04" />
            </svg>
        </div>

        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <div class="asset-image" style="background-image: url('../images/1.JPG');"></div>
                    <div class="asset-container">
                        <div class="asset-name">19인치 Rack (SHR-27SS)</div>
                        <div class="asset-location">신동3 중앙제어센터 1층 가속기제어팀</div>
                        <div class="asset-date">1983-06-19</div>
                        <div class="asset-manager">손창욱</div>
                        <div class="asset-number">198306194</div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>
<script>
    var index = {};
    var swiper = new Swiper('.swiper-container', {
        effect: 'coverflow',
        grabCursor: true,
        centeredSlides: true,
        slidesPerView: '4',
        coverflowEffect: {
            rotate: 0,
            stretch: -160,
            depth: 200,
            modifier: 2,
            slideShadows: true,
        },

        virtual: {
            slides: []
        }
        // loop: true
    });

    function searchData() {
        var searchText = document.getElementById("input").value;
        if (searchText.length) {
            var assetNumber = document.getElementById('input').value;
            var assetIndex = index[assetNumber];
            if (assetIndex) {
                swiper.slideTo(assetIndex, 1000, false);
            }
            else {
                alert("No Result");
            }
        }
        else {
            alert("No Asset Number have been specified.");
        }
    }

    var input = document.getElementById("input");
    input.addEventListener("keyup", function (event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            searchData();
            // document.getElementById("button").click();
        }
    });

    var slideMove = document.getElementsByClassName("swiper-container")[0];

    document.addEventListener("keydown", function (event) {
        console.log(event.keyCode);
        switch (event.keyCode) {
            case 37: // Arrow Left
                swiper.slidePrev(500, false);
                break;
            case 39:
                swiper.slideNext(500, false);
                break;
        }
    });

    function getAssetData() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var jsonValue = JSON.parse(this.responseText);
                createSwiperSlide(jsonValue);

            }
        };
        var rName = "http://192.168.68.126:8080/inventory/retrieve/*";
        xhttp.open("GET", rName, false);
        xhttp.send();
    }

	var imageServer = 'http://192.168.68.126:4879/image/'
	function createSwiperSlide(jsonData) {
		// var swiperWrapperClass = document.getElementsByClassName('swiper-wrapper');
		var count = 0;
		var nameDic = { '이상일': 'SI', '최용준': 'YJ', '김용학': 'YH', '손창욱': 'CW', '박미정': 'MJ' };
		var slideArray = [];

		// for (let i = 0; i < jsonData.length; i++) {
		// 	// var sampleAsset = count * 11;

		// 	var slideItemElem = document.createElement('DIV');
		// 	slideItemElem.classList.add('swiper-slide');

		// 	var assetImageElem = document.createElement('DIV');
		// 	assetImageElem.classList.add('asset-image');
		// 	assetImageElem.style.backgroundImage = 'url("' + imageServer + jsonData[i].id + '/' + jsonData[i].fileName + '")';

		// 	var assetContainerElem = document.createElement('DIV');
		// 	assetContainerElem.classList.add('asset-container');

		// 	var assetNumberElem = document.createElement('DIV');
		// 	var assetDateElem = document.createElement('DIV');
		// 	var assetManagerElem = document.createElement('DIV');
		// 	var assetNameElem = document.createElement('DIV');
		// 	var assetLocationElem = document.createElement('DIV');

		// 	assetNumberElem.classList.add('asset-number');
		// 	assetDateElem.classList.add('asset-date');
		// 	assetManagerElem.classList.add('asset-manager');
		// 	assetNameElem.classList.add('asset-name');
		// 	assetLocationElem.classList.add('asset-location');

		// 	// Set Asset Data
		// 	assetNumberElem.innerText = jsonData[i].assetNum;
		// 	assetDateElem.innerText = jsonData[i].date;
		// 	assetManagerElem.innerText = nameDic[jsonData[i].manager];
		// 	assetNameElem.innerText = jsonData[i].deviceName;
		// 	assetLocationElem.innerText = jsonData[i].location;

		// 	assetContainerElem.appendChild(assetNumberElem);
		// 	assetContainerElem.appendChild(assetDateElem);
		// 	assetContainerElem.appendChild(assetManagerElem);
		// 	assetContainerElem.appendChild(assetNameElem);
		// 	assetContainerElem.appendChild(assetLocationElem);

		// 	slideItemElem.appendChild(assetImageElem);
		// 	slideItemElem.appendChild(assetContainerElem);


		// 	// swiper.appendSlide(slideItemElem)
		// 	slideArray.push(slideItemElem.outerHTML);
		// 	// swiper.virtual.appendSlide(slideItemElem.outerHTML);

		// 	// swiperWrapperClass[0].appendChild(slideItemElem);

		// 	index[jsonData[i].assetNum] = count;
		// 	count += 1;
		// }

		swiper.virtual.appendSlide("aaa");
		swiper.update();
		// swiper.init();
	}

	function timer() {
		var d = new Date();
		document.getElementById('time-stamp').innerHTML = d.toLocaleTimeString('en-GB');
	}

	window.onload = function () {
		var myVar = setInterval(timer, 1000);

		getAssetData();
	}

</script>

</html>