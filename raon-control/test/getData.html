<!DOCTYPE html>
<html>

<body>
    <div id="length"></div>
    <div id="name"></div>
    <div id="value"></div>
</body>
<script>
    var pvData = new Object();

    function getData() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {

                let jsonValue = JSON.parse(this.responseText);
                let channelLength = jsonValue.channelName.length;
                let valueLength = jsonValue.value.length

                for (let i = 0; i < channelLength; i++) {
                    pvData[jsonValue.channelName[i]] = jsonValue.value[i];
                    console.log(jsonValue.channelName[i], jsonValue.value[i]);
                }


                // if (jsonValue.length)

                // }
            }

        };
        var server = "http://192.168.68.126";
        xhttp.open("GET", server, true);
        xhttp.send();
    }

    function getScheduleDatabase() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {

                let jsonValue = JSON.parse(this.responseText);
                document.getElementById('value').innerHTML = jsonValue[0];
                console.log(this.responseText);
            }

        };
        var server = "http://192.168.0.105/2021-01";
        xhttp.open("GET", server, true);
        xhttp.send();
    }

    function monitoring() {
        document.getElementById("value").innerText = pvData['scwookHost:ai1'];
    }

    window.onload = function () {

        //var getPVData = setInterval(getData, 2000);
        var getDBData = setInterval(getScheduleDatabase, 2000);
        //var startMonitoring = setInterval(monitoring, 1000);
    }
</script>

</html>